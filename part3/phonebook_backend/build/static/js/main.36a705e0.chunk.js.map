{"version":3,"sources":["components/Search.js","components/Form.js","components/Display.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Search","handleSearch","searchParam","onChange","value","Form","addContact","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Display","persons","deleteContact","map","person","key","Math","random","name","number","onClick","id","baseUrl","axios","get","newObject","post","delete","put","Notification","successMessage","errorMessage","className","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","App","useState","setPersons","setNewName","setNewNumber","setSearchParam","setSuccessMessage","setErrorMessage","useEffect","personsService","then","response","data","displayedContacts","length","filter","toLowerCase","indexOf","event","target","preventDefault","contactObject","oldContact","find","window","confirm","updatedContact","setTimeout","catch","error","console","log","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"8LAUeA,EARA,SAAC,GAAmC,IAAjCC,EAAgC,EAAhCA,aAAcC,EAAkB,EAAlBA,YAC9B,OACE,6BACE,8CAAmB,2BAAOC,SAAUF,EAAcG,MAAOF,OCahDG,EAhBF,SAAC,GAA8E,IAA5EC,EAA2E,EAA3EA,WAAYC,EAA+D,EAA/DA,QAASC,EAAsD,EAAtDA,iBAAkBC,EAAoC,EAApCA,UAAWC,EAAyB,EAAzBA,mBAChE,OACE,0BAAMC,SAAUL,GACd,sCACQ,2BAAOF,MAAOG,EAASJ,SAAUK,KAEzC,wCACU,2BAAOJ,MAAOK,EAAWN,SAAUO,KAE7C,6BACE,4BAAQE,KAAK,UAAb,UCEOC,EAZC,SAAC,GAAgC,IAA9BC,EAA6B,EAA7BA,QAASC,EAAoB,EAApBA,cAE1B,OACID,EAAQE,KAAI,SAAAC,GAAM,OAChB,uBAAGC,IAAKC,KAAKC,UACVH,EAAOI,KADV,IACiBJ,EAAOK,OACtB,4BAAQC,QAAS,kBAAMR,EAAcE,EAAOO,GAAIP,EAAOI,QAAvD,e,gBCLJI,EAAU,eAkBD,EAhBA,WACb,OAAOC,IAAMC,IAAIF,IAeJ,EAZO,SAAAG,GACpB,OAAOF,IAAMG,KAAKJ,EAASG,IAWd,EARO,SAACJ,GACrB,OAAOE,IAAMI,OAAN,UAAgBL,EAAhB,YAA2BD,KAOrB,EAJO,SAACA,EAAII,GACzB,OAAOF,IAAMK,IAAN,UAAaN,EAAb,YAAwBD,GAAMI,ICmBxBI,EAnCM,SAAC,GAAsC,IAApCC,EAAmC,EAAnCA,eAAgBC,EAAmB,EAAnBA,aAsBtC,OAAsB,OAAnBD,GAA4C,OAAjBC,EACrB,KAIP,yBAAKC,UAAU,UAAUC,MAA0B,OAAnBH,EAff,CACjBI,MAAO,MACPC,WAAY,WACZC,SAAU,GACVC,YAAa,QACbC,aAAc,EACdC,QAAS,GACTC,aAAc,IAjBK,CACnBN,MAAO,QACPC,WAAY,WACZC,SAAU,GACVC,YAAa,QACbC,aAAc,EACdC,QAAS,GACTC,aAAc,KAoBS,OAAnBV,EAA0BC,EAAeD,ICqHlCW,EA7IH,WAAO,IAAD,EACgBC,mBAAS,IADzB,mBACR/B,EADQ,KACCgC,EADD,OAEgBD,mBAAS,IAFzB,mBAERtC,EAFQ,KAECwC,EAFD,OAGoBF,mBAAS,IAH7B,mBAGRpC,EAHQ,KAGGuC,EAHH,OAIuBH,mBAAS,IAJhC,mBAIT3C,EAJS,KAII+C,EAJJ,OAK6BJ,mBAAS,MALtC,mBAKTZ,EALS,KAKOiB,EALP,OAMyBL,mBAAS,MANlC,mBAMTX,EANS,KAMKiB,EANL,KAQhBC,qBAAU,WACVC,IAEEC,MAAK,SAAAC,GACFT,EAAWS,EAASC,WAEtB,IAGH,IA0FKC,EAA2C,IAAvBvD,EAAYwD,OACnC5C,EACAA,EAAQ6C,QAAO,SAAA1C,GAAM,OAAIA,EAAOI,KAAKuC,cAAcC,QAAQ3D,EAAY0D,gBAAkB,KAG3F,OACE,6BACD,kBAAC,EAAD,CACC3B,eAAgBA,EAChBC,aAAcA,IAEZ,yCACA,kBAAC,EAAD,CACEhC,YAAaA,EACbD,aAhGmB,SAAC6D,GAC1Bb,EAAea,EAAMC,OAAO3D,UAiGxB,+CACA,kBAAC,EAAD,CACEE,WAzEa,SAAAwD,GACnBA,EAAME,iBAEJ,IAAMC,EAAgB,CACpB5C,KAAMd,EACTe,OAAQb,GAIHyD,EAAapD,EAAQqD,MAAK,SAAAlD,GAAM,OAAIA,EAAOI,OAASd,KACpD2D,EACaE,OAAOC,QAAP,6BAAqC9D,EAArC,8CAEjB8C,EACgBa,EAAW1C,GAAIyC,GAC7BX,MAAK,SAAAgB,GACLxB,EAAWhC,EAAQE,KAAI,SAAAC,GAAM,OAAIA,EAAOO,KAAO0C,EAAW1C,GAAKP,EAASqD,EAAed,SACvFN,EAAkB,sBAAD,OAAuB3C,IACxCwC,EAAW,IACXC,EAAa,IACbuB,YAAW,WACVrB,EAAkB,QAChB,QAEHsB,OAAM,SAAAC,GACNC,QAAQC,IAAIF,EAAMlB,SAASC,MAC3BL,EAAgB,gCAChBoB,YAAW,WACVpB,EAAgB,QACd,QAINE,EACgBY,GACdX,MAAK,WACLR,EAAWhC,EAAQ8D,OAAOX,IAC1Bf,EAAkB,qBAAD,OAAsB3C,IACvCwC,EAAW,IACXC,EAAa,IACbuB,YAAW,WACVrB,EAAkB,QAChB,QAEHsB,OAAM,SAAAC,GACNC,QAAQC,IAAIF,EAAMlB,SAASC,KAAKiB,OAChCtB,EAAgB,8BAChBoB,YAAW,WACVpB,EAAgB,QACd,SAyBA3C,iBA7GmB,SAACsD,GACxBf,EAAWe,EAAMC,OAAO3D,QA6GpBM,mBA1GqB,SAACoD,GAC1Bd,EAAac,EAAMC,OAAO3D,QA0GtBG,QAASA,EACTE,UAAWA,IAEb,wCACA,kBAAC,EAAD,CACEK,QAAS2C,EACTvD,YAAaA,EACjBa,cAzGmB,SAACS,EAAIH,GACN+C,OAAOC,QAAP,sDAA8DhD,KAE/EgC,EACgB7B,GACd8B,MAAK,WACLR,EAAWhC,EAAQ6C,QAAO,SAAA1C,GAAM,OAAIA,EAAOO,KAAOA,MAClDuB,EAAW,IACXC,EAAa,IACbE,EAAkB,GAAD,OAAI7B,EAAJ,iDACjBkD,YAAW,WACVrB,EAAkB,QAChB,QAEHsB,OAAM,WACN1B,EAAWhC,EAAQ6C,QAAO,SAAA1C,GAAM,OAAIA,EAAOO,KAAOA,MAClD2B,EAAgB,GAAD,OAAI9B,EAAJ,oCAA4C,iBCjDlEwD,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.36a705e0.chunk.js","sourcesContent":["import React from 'react';\n\nconst Search = ({ handleSearch, searchParam }) => {\n  return (\n    <div>\n      <h4>Search contact:<input onChange={handleSearch} value={searchParam}/></h4>\n    </div>\n  )\n}\n\nexport default Search;","import React from 'react';\n\nconst Form = ({ addContact, newName, handleNameChange, newNumber, handleNumberChange }) => {\n  return (\n    <form onSubmit={addContact}>\n      <div>\n        name: <input value={newName} onChange={handleNameChange}/>\n      </div>\n      <div>\n        number: <input value={newNumber} onChange={handleNumberChange}/>\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default Form;","import React from 'react';\n\nconst Display = ({ persons, deleteContact }) => {\n\n  return (\n      persons.map(person => \n        <p key={Math.random()}>\n          {person.name} {person.number}\n          <button onClick={() => deleteContact(person.id, person.name)}>Delete</button>\n        </p>\n    )   \n  )\n}\n\nexport default Display;","import axios from 'axios';\n\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  return axios.get(baseUrl)\n}\n\nconst createContact = newObject => {\n  return axios.post(baseUrl, newObject)\n}\n\nconst deleteContact = (id) => {\n  return axios.delete(`${baseUrl}/${id}`)\n}\n\nconst updateContact = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject)\n}\n\nexport default { getAll, createContact, deleteContact, updateContact };","import React from 'react';\n\nconst Notification = ({ successMessage, errorMessage }) => {\n\n  const successStyle = {\n    color: 'green',\n    background: 'lighgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n\n  const errorStyle = {\n    color: 'red',\n    background: 'lighgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n\n  if(successMessage === null && errorMessage === null) {\n    return null\n  }\n\n  return (\n    <div className=\"success\" style={successMessage === null ? errorStyle : successStyle}>\n      {\n        successMessage === null ? errorMessage : successMessage\n      }\n    </div>\n  )\n}\n\nexport default Notification;","import React, { useState, useEffect } from 'react';\nimport Search from './components/Search';\nimport Form from './components/Form';\nimport Display from './components/Display';\nimport personsService from './services/persons';\nimport Notification from './components/Notification';\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n\tconst [ searchParam, setSearchParam ] = useState('');\n\tconst [ successMessage, setSuccessMessage ] = useState(null);\n\tconst [ errorMessage, setErrorMessage ] = useState(null);\n\n  useEffect(() => {\n\t\tpersonsService\n\t\t\t.getAll()\n\t\t\t.then(response => {\n      \tsetPersons(response.data)\n    \t})\n  }, []);\n\n  //Event handlers for Name and Number changes in the input fields (saves these in state)\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n\t}\n\t\n\tconst handleSearchParam = (event) => {\n\t\tsetSearchParam(event.target.value)\n\t}\n\t\n\t//Delete person from database (prompt a confirmation)\n  const handleDelete = (id, name) => {\n\t\t\t\tconst confirmed = window.confirm(`Are you sure you want to delete the contact ${name}`)\n\t\t\t\tif (confirmed) {\n\t\t\t\t\tpersonsService\n\t\t\t\t\t\t.deleteContact(id)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tsetPersons(persons.filter(person => person.id !== id));\n\t\t\t\t\t\t\tsetNewName('');\n\t\t\t\t\t\t\tsetNewNumber('');\n\t\t\t\t\t\t\tsetSuccessMessage(`${name} was succesfully removed from the phonebook!`)\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tsetSuccessMessage(null)\n\t\t\t\t\t\t\t}, 3000)\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\tsetPersons(persons.filter(person => person.id !== id))\n\t\t\t\t\t\t\tsetErrorMessage(`${name} was already removed from server`, 'error')\n\t\t\t\t\t\t})\n\t\t\t\t}\n  }\n\n\t//Add or update person to database\n  const addContact = event => {\n\t\tevent.preventDefault();\n\t\t\n    const contactObject = {\n      name: newName,\n\t\t\tnumber: newNumber\n\t\t};\n\n\t\t//If a contact with same name exists -> update contact\n\t\tconst oldContact = persons.find(person => person.name === newName)\n    if (oldContact) {\n\t\t\tconst confirmed = window.confirm(`Number for contact ${newName} already exists. Do you want to replace?`)\n\t\t\tif (confirmed) {\n\t\t\t\tpersonsService\n\t\t\t\t\t.updateContact(oldContact.id, contactObject)\n\t\t\t\t\t.then(updatedContact => {\n\t\t\t\t\t\tsetPersons(persons.map(person => person.id !== oldContact.id ? person : updatedContact.data))\n\t\t\t\t\t\tsetSuccessMessage(`Updated number for ${newName}`);\n\t\t\t\t\t\tsetNewName('');\n\t\t\t\t\t\tsetNewNumber('');\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tsetSuccessMessage(null)\n\t\t\t\t\t\t}, 3000)\n\t\t\t\t\t})\n\t\t\t\t\t.catch(error => {\n\t\t\t\t\t\tconsole.log(error.response.data)\n\t\t\t\t\t\tsetErrorMessage(`Could not update the contact`)\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tsetErrorMessage(null)\n\t\t\t\t\t\t}, 3000)\n\t\t\t\t\t})\n\t\t//If a brand new contact -> add to persons db\n\t\t}} else {\n\t\t\tpersonsService\n\t\t\t\t.createContact(contactObject)\n\t\t\t\t.then(() => {\n\t\t\t\t\tsetPersons(persons.concat(contactObject))\n\t\t\t\t\tsetSuccessMessage(`Added contact for ${newName}`)\n\t\t\t\t\tsetNewName('')\n\t\t\t\t\tsetNewNumber('')  \n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetSuccessMessage(null)\n\t\t\t\t\t}, 3000)\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tconsole.log(error.response.data.error)\n\t\t\t\t\tsetErrorMessage('Could not add the contact!')\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetErrorMessage(null)\n\t\t\t\t\t}, 3000)\n\t\t\t\t})\n\t\t\t\t}\n\t}\n\n\t//Defines what contacts to show based on search input\n\tconst displayedContacts = searchParam.length === 0\n\t\t? persons\n\t\t: persons.filter(person => person.name.toLowerCase().indexOf(searchParam.toLowerCase()) >= 0)\n\n\n  return (\n    <div>\n\t\t\t<Notification \n\t\t\t\tsuccessMessage={successMessage} \n\t\t\t\terrorMessage={errorMessage}\n\t\t\t/>\n      <h1>Phonebook</h1>\n      <Search \n        searchParam={searchParam} \n        handleSearch={handleSearchParam}\n      />\n      <h2>Add new contact</h2>\n      <Form \n        addContact={addContact} \n        handleNameChange={handleNameChange} \n        handleNumberChange={handleNumberChange} \n        newName={newName} \n        newNumber={newNumber} \n      />\n      <h2>Contacts</h2>\n      <Display \n        persons={displayedContacts}\n        searchParam={searchParam}\n\t\t\t\tdeleteContact={handleDelete}\n      />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}